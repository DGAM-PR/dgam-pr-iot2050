header:
  version: 14
  includes:
    - repo: meta-iot2050
      file: kas/iot2050.yml

build_system: isar
target: iot2050-image-swu-example

repos:
  meta-iot2050:
    url: https://github.com/siemens/meta-iot2050
    path: meta-iot2050
    branch: master
    layers:
      meta:
      meta-example: # REQUIRED for iot2050-image-swu-example
      # meta-node-red: NOT REQUIRED for PLC facing IOT2050 Device
      # meta-sm: NOT REQUIRED as only RS232 on X30 port (ASCII Communication) is needed

  meta-dgam-pr:
    path: meta-dgam-pr
    layers:
      .:

local_conf_header:
  dgam_customization: |
    IMAGE_INSTALL:remove = "tcf-agent"
    IOT2050_DOCKER_SUPPORT = "0"
    IOT2050_DEBIAN_DEBUG_PACKAGES:remove = "mosquitto mosquitto-clients"
    IMAGE_INSTALL:append = " kubesolo"
    IMAGE_INSTALL:append = " kubectl"
    IMAGE_INSTALL:append = " systemd-networkd"
    INITRAMFS_OVERLAY_MOUNT_OPTION = "defaults,nodev,nosuid"
